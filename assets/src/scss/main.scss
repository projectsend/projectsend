@import "partials/variables";
@import "partials/mixins";
@import "partials/footable";
@import "partials/chosen";
@import "partials/tagsinput";
@import "partials/override";
@import "partials/side_modal";
@import "partials/codemirror";
@import "partials/password_toggler";

// Backend and default theme shared styles
p {
    margin-bottom:1.2em;
    line-height:1.5em;
}

a img {	border:none; }

.external_link:before {
    content: "\f08e";
    font: normal normal normal 14px/1 FontAwesome;
    margin-right:3px;
    line-height:1px;
    color:black;
}

.clear { clear:both; }

html,
body
{
    background:$body_background;
    color:$main_text;
    //font-family:$font_body;
    font-size:.95rem;
    line-height:1.2rem;
    height:100%;
    position:relative;
    padding:0;
    margin:0;
}

body {
    padding-top: 4.5rem;
}

body.login {
    height:auto;
}

.none {
    display: none;
}

// Backend only styles

.backend {
    a {
        text-decoration:none;

        &:hover,
        &:focus
        {
            text-decoration:none;
        }
    }

    .clear {
        clear:both;
    }

    h1, h2, h3, h4, h5, h6 {
        font-weight:normal;
        font-family: $font_heading;
    }

        h1 {
            color:white;
            font-size:32px;
            line-height:32px;
            margin:15px 0;
        }

        h2 {
            color:#333333;
            font-size:27px;
            line-height:29px;
            margin:0 0 35px;
            letter-spacing:-1px;
        }

        h3 {
            font-size:17px;
            line-height:19px;
            padding:0;
            font-weight:900 !important;
            margin-bottom:20px;
            text-transform:uppercase;
        }

        h4 {
            font-size:13px;
            margin-bottom:20px;
            line-height:18px;
        }
        
        h5 {
            font-size:17px;
            margin-bottom:20px;
            line-height:18px;
            
            i {
                margin-right: 8px;
            }
        }

    .system_msg {
        padding:10px;
        background:#FFFBE4;
        border-bottom:1px solid #CCCCCC;
        margin-bottom: 20px;

        p {
            margin:0;
        }
    }

    #main {
        padding:30px;
    }

    // Update available message bar

    .update_msg {
        .buttons {
            padding:0 0 0 25px;
            display:inline-block;
            margin-top:3px;
        }

        ul {
            text-align:right;

            li {
                display:inline-block;
                margin:0;
                font-size:0;
            }

            .update_icon {
                display:inline-block;
                background:black;
                color:white;
                text-align:center;
                padding:4px;
                font-size:20px;
                margin:0 2px;
                @include border-radius(50%);
            }

            .update_icon_status_0 {
                @include opacity(.4);
            }
        }

    }

    &.default-template .update_msg {
        display:none !important;
    }

    #donations_message {
        background:#0094bb ;
        color:#fff;
        @include border-radius(2px);
        margin:0 0 20px;
        padding:30px;
        font-size:1.1em;

        h3 {
            margin-top:0;
            font-size:1.5em;
        }

        p {
            margin-bottom:0;
        }

        a {
            color:white;
            font-weight:bold;
        }
    }

    // Header

    .branding_unlogged {
        text-align:center;
        margin:20px auto;

        img, svg {
            height:auto;
            width:100%;
            max-width:250px;
        }
    }

    #login_logo {
        margin:15px auto;
        text-align:center;
    }

    .header_unlogged {
        clear:both;

        .navbar-header {
            display:block;
            width:100%;
            padding:0;

            span {
                display:block;
                width:100%;
            }
        }
    }

    #install_form {
        margin-top:30px;
    }

    #install_extra {
        margin-top:30px;
        font-weight:bold;
        font-size:11px;
        color:#0099CC;
    }

    #install_inside {
        width:400px;
        margin:20px auto 0;
    }

    // Home widgets

    .widget {
        background:white;
        display:block;
        border:1px solid #ccc;
        width:100%;
        margin-bottom:30px;

        @include border-radius(2px);
        /*@include box-shadow(3px 3px 5px, #dedede);*/

        .widget_int {
            padding:15px;
        }

        h4 {
            text-align:left;
            padding:13px;
            font-size:16px;
            margin:0 !important;
            color:$widget_title_color;
            background: $widget_title_background;
            border-bottom:1px solid #dedede;
            @include border-radius(2px 2px 0 0);
        }

        &:hover h4 {
            background: $widget_hover_background;
        }

    }

    // Counters
    .widget_counters {
        ul {
            list-style: none;
            margin: 0 0 30px;
            padding: 0;
            display: flex;
            gap: 15px;

            @include bk(xs) {
                flex-wrap: wrap;
            }

            li {
                flex: 1;
                background: red;
                color: white;
                padding: 20px;
                position: relative;

                @include bk(xs) {
                    flex: 1 0 20%;
                    margin-bottom: 20px;
                }
    
                &:nth-child(1) { background: #f2b705; }
                &:nth-child(2) { background: #86ae00; }
                &:nth-child(3) { background: #717bbb; }
                &:nth-child(4) { background: #de629d; }
                &:nth-child(5) { background: #0094bb; }

                h6 {
                    font-weight: bold;
                    font-size: 35px;
                }

                h5 {
                    font-weight: normal;
                    font-size: 22px;
                }

                i {
                    position: absolute;
                    right: 20px;
                    top: 20px;
                    font-size: 100px;
                    opacity: .2;

                    @include bk(xs) {
                        opacity: .1;
                    }
                }
            }
        }
    }

    // Home LOG widget
    #widget_actions_log {
        #log_container {
            ul {
                list-style: none;
                margin: 0;
                padding: 0;

                li {
                    padding: 7px;
                    border-bottom: 1px solid #dedede;
                    display: flex;

                    &:nth-child(odd) {
                        background: #f6f6f6;
                    }

                    &:hover {
                        background: #fbf8e9;
                    }

                    i {
                        margin:0 1em;
                        color: #1ec4a7;
                        text-align: center;
                        font-size: 14px;
                    }

                    .date {
                        text-align: right;

                        span {
                            display: inline-block;
                            padding: 3px 0 0 0;
                            font-weight: bold;
                            line-height: 1;
                        }
                    }

                    .action {
                        flex: 2;
                        word-break: break-all;

                        .item_part1, .item_part2, .item_part4 {
                            color: $main_color;
                            font-weight: bold;
                        }
                    }
                }
            }
        }
    }

    .activities_log {
        padding:0;

        li {
            padding:7px;
            border-bottom:1px solid #EFEFEF;
            overflow:hidden;

            &:nth-child(odd) {
                background:#fafafa;
            }

            &:last-child {
                border-bottom:none !important;
            }

            .date {
                font-size:.9em;
                color:#999;
            }

            .log_ico {
                width:45px;
                float:left;
                @include opacity(.1);
            }

            &:hover .log_ico {
                @include opacity(.7);
            }

            span {
                font-weight:bold;
                color:$main_color;
            }

            span.secondary {
                color:#86AE00;
            }
        }
    }

    .view_full_log {
        text-align:right;
        padding-top:5px;
        margin-top:5px;
        border-top:1px solid #EFEFEF;
    }

    // Home NEWS widget

    .home_news {
        margin:0;
        padding:0;

        .date {
            color:#999;
            font-size:.9em;
        }

        h5 {
            margin:0 0 3px;
        }
    }

    // Home graphs
    .stats_change_days {
        margin-bottom:1.5em;
        display:inline-block;
    }

    .graph_legend {
        float:none;
        clear:both;
        display:block;
        text-align: left;
        margin: 0 0 30px;
        padding: 0;

        @include bk(md) {
            display:inline-block;
            text-align:right;
            padding-top:5px;
            margin:0 0 0 auto;
            float:right;
        }

        li {
            display:inline-block;
            margin-left:5px;
            font-size:.9em;
            padding:4px;

            &.legend_color {
                margin: 2px 5px 0 0;
            }
        }

    }

    .stats_change_data, .log_change_action {
        margin-bottom:2em;
    }

    .widget_system_info {
        .widget_int h3:first-child {
            margin-top:0;
        }

        dl {
            margin-bottom:25px;
        }

        dt {
            text-align:left;
        }

        dd {
            word-break: break-all;
        }
    }

    .loading-icon {
        text-align: center;
        margin: 30px auto;
        padding: 0;

        svg {
            width: 100px;
            height: auto;
        }
    }

    // Home statistics tooltip

    .widget_statistics {
        #stats_tooltip {
            position:absolute;
            display:none;
            background:black;
            color:#FFFFFF;
            padding:5px;
        }

        #chart_container canvas {
            display:block;
            width: 100%;
            padding: 0;
            margin: 0;
        }
    }

    // Main white content boxes

    .whitebox {
        background-color:white;
        border:1px solid #ccc;

        @include border-radius(2px);
    }

    .white-box {
        background-color:white;
        border:1px solid #ccc;

        @include border-radius(2px);

        .white-box-interior {
            padding:15px;
        }
    }

    .whiteform {
        margin:0;
        text-align:left;
        padding:20px;

        td {
            height:25px;
        }
    }

    .whitebox_text {
        padding-top:25px;
    }

    // Categories

    .categories_form {
        padding:20px;
        background:white;
        margin-bottom:40px;
        border:1px solid #ccc;
        @include border-radius(2px);
        /*@include box-shadow(3px 3px 5px, #dedede);*/

        h3 {
            margin:0 0 30px;
        }
    }

    // File management

    .file_status_visible, .account_status_active {
        color:#639822!important;
        font-weight:bold;
    }

    .file_status_hidden, .account_status_inactive {
        color:#D24244!important;
        font-weight:bold;
    }


    // VALIDATION
    .form-group {
        margin-bottom: 1rem;

        label.error {
            font-size:.85rem;
            color:#B94A48;
            background:#F2DEDE;
            margin:0;
            padding:.5rem;
            border:1px solid #EED3D7;
            position:relative;
            display: block;
            @include border-radius(0 0 3px 3px);
        }
    }

    .readonly-not-grayed {
        background-color: white !important;
    }

    .field_error {
        border:1px solid #B94A48 !important;
    }

    .field_error_msg {
        position:relative;

        ul {
            font-size:.95em;
            color:#B94A48;
            background:#F2DEDE;
            margin:0;
            padding:10px;
            border:1px solid #EED3D7;
            position:relative;
            -webkit-border-radius: 3px;
            -moz-border-radius: 3px;
            border-radius: 3px;

            li {
                padding:3px 0;

                &:last-child {
                    border-bottom:none;
                }
            }
        }

        &:after,
        &:before
        {
            bottom: 100%; border: solid transparent; content: " "; height: 0; width: 0; position: absolute; pointer-events: none;
        }

        &:after {
            border-color: rgba(45, 237, 14, 0); border-bottom-color:#F2DEDE; border-width: 10px; right: 5%; margin-left: -10px;
        }

        &:before {
            border-color: rgba(238, 211, 215, 0); border-bottom-color:#EED3D7; border-width: 11px; right: 5%; margin-left: -11px;
        }

        .options_box & {
            margin-left:44%;
        }

        .error_no_margin & {
            margin-left:0;
        }
    }

    // Edit file information on UPLOAD

    .file_editor {
        padding-top:15px;
        margin-bottom:40px;
    }

    .edit_files {

        .edit_files_blocks {
            background:white;
            border:1px solid #ccc;
            @include border-radius(2px);
            @include box-shadow(3px 3px 5px, #dedede);
            padding:30px 15px;

            &:hover {
                border:1px solid #888;
                @include box-shadow(3px 3px 5px, #ccc);
            }
        }

        .file_data {
            h3 {
                padding-top:0;
                margin-top:0;
            }

            @include bk(xs) {
                background:white;
                margin-bottom:25px;
            }
        }

        textarea {
            height:10em!important;
        }

        .column {
            padding:0 25px;
            margin-bottom: 50px;

            @include bk(md) {
                margin-bottom: 0;
            }

            &:last-child {
                border:none;
            }
        }

        .divider {
            margin:40px auto;
        }
    }

    .file_number {
        font-family:$font_heading;
        position:relative;
        word-break:break-all;
        margin:0;
        padding:10px;
        background:#232835;
        color:white;
        font-size:18px;
        display:inline-block;
        @include border-radius(5px 5px 0 0);

        p {
            padding:0 15px;
            margin:0;
            display:inline-block;
            word-wrap:break-word;

            span {
                display:inline-block;
                color:#888;
                margin:0 15px 0 0;
            }
        }
    }

    .list_mass_members {
        margin:10px 0 30px;
        padding:0;

        a {
            margin-right:5px;

            &:last-child {
                margin-right:0;
            }
        }
    }

    // Branding

    #current_logo_h2 {
        margin:30px 0 10px;
    }

    #current_logo {
        margin:20px auto;
        text-align:center;
        padding:20px 0 0;
        overflow:hidden;

        @include bk(xs) {
            text-align:center;
        }
    }

    #current_logo_img {
        padding:20px 0;

        img, svg {
            height:auto;
            width:100%;
            max-width:300px;
        }
    }

    .preview_logo_note {
        font-size:.9em;
        margin-top:30px;
        color:#888;
    }

    #form_upload_logo {
        padding:30px 0 10px;
        border-top:1px dotted #CCCCCC;
    }

    // OPTIONS page

    .field_note {
        margin:4px 0 15px 0;
        font-size:1em;
        color:#999;
        padding-left:6px;
        font-weight:300;
        border-left:3px solid #eee;

        a {
            color:#0094bb;
            text-decoration:underline;
        }

        .box-reset-password & {
            margin-left:0;
        }
    }

    optgroup {
        padding:1em;
        border:dotted #999;
        border-width:1px 0 0 0;
    }
    
    input[type="number"].number_small {
        width: 80px;
    }

    .checkbox_options {
        width:auto !important;
    }

    .options_divide {
        clear:both;
        overflow:hidden;
        margin:25px 0;
    }

    .options_column {
        overflow:hidden;
    }

    .textarea_medium {
        min-height:150px;
    }

    .textarea_high {
        min-height:200px;
    }

        .options_col_left {
            width:47%;
            float:left;
        }

        .options_col_right {
            width:47%;
            float:right;
        }

    .preview_button {
        margin-top:25px;
        text-align:center;

        button {
            margin-bottom:10px;
        }
    }

    .template_selector {
        .template {
            margin-bottom:40px;
            padding:15px 0;
            background:white;
            overflow:hidden;
            position:relative;

            &.current_template {
                border:5px solid $main_color;
            }

            h4 {
                font-size:1.5em;
                color:black;
                margin-top:25px;
            }

            .info {

                h5 {
                    margin:20px 0 10px;
                    font-size:1.2em;
                }
            }

            .images {
                position:relative;

                img {
                    width:100%;
                    height:auto;
                }

                .screenshot {
                    display:block;
                }

                .cover {
                    @include opacity(0);
                    position:absolute;
                    width:100%;
                    left:0;
                    top:0;
                    height:100%;
                    transition:.3s all linear;
                }
            }

            &:hover {
                .images {
                    .cover {
                        @include opacity(1);
                    }
                }
            }

            .buttons {
                text-align:right;
            }
        }
    }

    // Recreate the dark, inverted button from Bootstrap 2

    .btn-inverse,
    .btn-inverse:focus
    {
        background:#333;
        color:white;
        border-color:#333;
    }

    .btn-inverse:hover {
        color:white;
        background:#555;
    }

    // Misc

    .button_label {
        display:none;
    }

    .td_checkbox {
        width:50px;
    }

    #uploaded_files_tbl {
        margin-bottom:70px;
    }

    th.select_buttons {
        width:220px;
    }

    .membership_toggle {
        margin-right:10px;
    }

    .membership_toggle .toggle-group { transition: left 0.1s; -webkit-transition: left 0.1s; }

    .form_results_filter {
        margin-bottom:20px;

        a {
            text-decoration:underline;
            display:inline-block;
            padding-right:5px;
            margin-right:5px;
            border-right:1px solid #dedede;

            &:last-child {
                border-right:none;
            }

            &.filter_option {
                color:#c3c3ca;
            }
        }
    }
}

.dashboard_contents {
    padding-top:10px;
}

// Messages

#login_error {
    margin:0 auto 20px auto;
}

#donations_message {
    a {
        text-decoration:underline;
    }

    h3 {
        border:none;
    }
}

form .alert {
    margin-top:2em;
}

// Forms

.form_fields li label {
    display:inline-block;
    width:40%;
}

.textarea_label {
    vertical-align:top;
}

.form_submit_li {
    margin-top:25px;
    text-align:center;
}

.required {
    background:url(#{$img_path}/req-text.png) no-repeat right -2px;
    padding-right: 50px;
}

li .password_toggle {
    width:257px !important;
}

li .required.password_toggle {
    width:214px !important;
}

.btn_generate_password {
    margin-top:5px;
}

#add_group_form_description {
    height:150px;
}

// 2FA
#otp_request_new_container {
    text-align: center;
    border: 1px solid #dedede;
    padding: 10px;
    margin-top: 20px;

    h4 {
        padding: 0;
        margin: 0 0 10px;
    }
}

// Files actions

.form_actions_left {
    display:block;
    float:left;

    form {
        display:inline-block;
    }

    input[type="text"] {
        font-size:13px;
        height:30px;
        line-height:30px;
    }
}

.form_actions_right {
    display:block;
    float:right;
}

.form_actions_left select,
.form_actions_right select
{
    height:30px;
    font-size:13px;
}

.form_actions,
.form_actions_limit_results
{
    padding:0;
    margin-bottom:5px;
}

.form_actions_count {
    text-align:left;
    padding-top:15px;
    font-size:1.2em;
    overflow:hidden;
    border-top:1px dotted #ccc;
}

.form_actions {
    .form_actions_submit select {
        width:140px;
    }

    .form_actions_submit select.large_select {
        width:320px !important;
    }
}

.form_actions_limit_results {
    .form-control-short {
        width:140px;
    }

    .form_actions_search_box {
        width:80px !important;
    }
}

#btn_proceed_search {
    margin-right:10px !important;
}

.form_actions_submit label {
    font-size:14px;
    margin-right:15px;
    font-weight:normal;
}

// Buttons

.close-popover {
    text-align:center;
    margin:15px auto;
}

.after_form_buttons {
    margin-top:50px;
    text-align:center;
}

.inside_form_buttons {
    margin-top:25px;
    text-align:center;
    display: block;
}

.whitebox .alert-info {
    margin-top:25px;
}

.alert .alert-title {
    padding-bottom:0;
    margin-bottom:8px;
    border:none;
    font-weight:bold;
    font-size:17px;
}

// Files list view (File Manager)

.file_name {
    font-weight:bold;

    a {
        text-decoration:underline;
    }
}

.thumbnail {
    padding: 0;
    margin-bottom: 0;
    @include border-radius(0);
}

.public_link_copy {
    padding:5px;
    margin:10px 0 10px auto !important;
}

// Misc
.forbidden {
    h2 {
        margin-top:40px;
    }
}

.pagination_wrapper {
    margin:2em auto;
}

.go_to_page #page_number {
    width:4em !important;
    text-align:center;
}

.format_url {
    word-break:break-all;
}

// Public download page
body.download {
    .file_title {
        span {
            font-size: 20px;
        }
    }

    .description {
        font-size: 15px;
        line-height: 20px;
    }

    .actions {
        margin-top: 20px;
    }
}

// Public files and groups listing
.public {
    .intro {
        margin-bottom: 20px;
    }

    .listing {
        ul {
            margin:0;
            padding: 0;

            li {
                padding: 8px 0;
                border-bottom: 1px solid #dedede;

                &:last-child {
                    border: none;
                }

                &.file:hover {
                    background: #f0f0f0;
                }

                i {
                    margin-right: .5em;
                }

                ul {
                    padding-left: 2em;
                }
            }
        }
    }
}

// Preview modal
#previewModal {
    .modal-header {
        .modal-title {
            display: inline-block;
            margin-bottom: 0;
        }
    }

    .modal-body {
        audio {
            width: 100%;
        }
    }

    .embed-responsive {
        background: black;
    }
}

// Misc Mobile only styles

@include bk(xs) {
    .main_content {
        padding:0;
    }

    .menu_hidden {
        .main_side_menu {
            display:none;
        }

        .main_content {
            margin-left:0px !important;
        }
    }

    .main_title {
        text-align:center;
        margin-bottom:20px;
    }

    #header #account {
        text-align:center;

        span {
            display:block;
            margin-bottom:8px;
        }
    }

    .form_filters {
        display:block;
        clear:both;
    }

   .form_filters select {
      max-width: 300px;
   }

   .form_actions_left,
    .form_actions_right
    {
      float: none;
   }

    .group_float {
        float:left;
        margin-right:5px;
    }
}

#browser_encrypt_data {
    margin-top: 2rem;

    #keys_list {
        background-color: mediumturquoise;

        #keys {
            list-style: none;
        }
    }
}

@import "parts/login";
@import "parts/modal";
@import "parts/top-bar";
@import "parts/main-menu";
@import "parts/footer";
@import "parts/buttons";
